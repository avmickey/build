"use strict";(self.webpackChunknpa=self.webpackChunknpa||[]).push([[687],{3302:function(e,s,a){a.r(s),a.d(s,{default:function(){return w}});var t=a(4165),i=a(5861),n=a(2791),c=a(2655),l=a(9439),r=a(3007),d=a(32),o=a(7689),u=a(2307),m=a(7004),p=a(6810),v=a(620),x=a(2698),_=a(1172),h=a(9254),j=a(184),b=(0,d.Pi)((function(e){var s=e.product,a=(0,n.useContext)(x._).basket,c=(0,o.s0)(),d=(0,n.useState)(null),b=(0,l.Z)(d,2),N=b[0],f=b[1],k=(0,m.Z)((0,i.Z)((0,t.Z)().mark((function e(){var a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.U.getOne(s.id);case 2:a=e.sent,f(a);case 4:case"end":return e.stop()}}),e)})))),g=(0,l.Z)(k,2)[1],S=(0,_.vm)(_.xU);(0,n.useEffect)((function(){g()}),[]);var Z=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var i,n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=document.querySelector(".basket__price"),e.next=3,(0,v.Od)(s.id);case 3:n=e.sent,a.setProducts=n.devices,n.devices.length<1&&c("/shop"),1==n.devices.length&&(console.log(1),null===i||void 0===i||i.classList.remove("bottom"),null===i||void 0===i||i.classList.remove("show"),null===i||void 0===i||i.classList.remove("showtwo"));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,j.jsxs)("div",{className:"productbasket__item",children:[(0,j.jsx)("div",{className:"productbasket__first",children:(0,j.jsx)("div",{className:"productbasket__blockimg",onClick:function(){c("/basket/".concat(s.id)),document.documentElement.scrollIntoView(!0)},children:(0,j.jsx)("div",{className:"productbasket__img ",style:{backgroundImage:"url(".concat(p.T5).concat(Array.from(Object.values(JSON.parse((null===N||void 0===N?void 0:N.deviceimg.img)||"{}")))[0],")")}})})}),(0,j.jsxs)("div",{className:"productbasket__second",children:[(0,j.jsxs)("div",{className:"productbasket__text",children:[(0,j.jsx)("div",{className:"productbasket__name",children:(0,j.jsx)("p",{className:"basket",children:N&&(null===N||void 0===N?void 0:N.name.length)<=20?null===N||void 0===N?void 0:N.name:(null===N||void 0===N?void 0:N.name.split("").filter((function(e,s){return s<=20})).join(""))+"..."})}),(0,j.jsx)("div",{className:"productbasket__category",children:(0,j.jsx)("p",{className:"mini basket",children:null===N||void 0===N?void 0:N.brand.name})})]}),(0,j.jsx)("div",{className:"productbasket__btnfirst",children:(0,j.jsx)(S,{product:s})})]}),(0,j.jsx)("div",{className:"productbasket__btnsecond",children:(0,j.jsx)(S,{product:s})}),(0,j.jsx)("div",{className:"productbasket__midst",children:(0,j.jsxs)("div",{className:"productbasket__price",children:[0!=a.getSale&&(0,j.jsx)("p",{className:"big sale",children:"$".concat(+(null===s||void 0===s?void 0:s.price)*s.quantity-+(null===s||void 0===s?void 0:s.price)*s.quantity/100*(a.getSale+ +(null===s||void 0===s?void 0:s.sale)))}),s.sale>0&&a.getSale<=0?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("p",{className:"basket newcols big",children:"$".concat(+(null===s||void 0===s?void 0:s.price)*(null===s||void 0===s?void 0:s.quantity)-+(null===s||void 0===s?void 0:s.price)*(null===s||void 0===s?void 0:s.quantity)/100*s.sale)}),(0,j.jsx)("p",{className:"basket through mini",children:"$".concat(+(null===s||void 0===s?void 0:s.price)*(null===s||void 0===s?void 0:s.quantity))})]}):(0,j.jsx)("p",{className:0!=a.getSale?"mini old basket":"big basket",children:"$".concat(+(null===s||void 0===s?void 0:s.price)*(null===s||void 0===s?void 0:s.quantity))})]})}),(0,j.jsxs)("div",{className:"productbasket__end",children:[(0,j.jsx)(h.Z,{id:s.id}),(0,j.jsx)("div",{onClick:Z,className:"productbasket__delete",children:(0,j.jsx)(r.r,{})})]})]})})),N=(0,d.Pi)((function(){var e=(0,n.useContext)(x._).basket;return(0,j.jsx)("div",{className:"productbasket__goods",children:e.getProducts.map((function(e){return(0,j.jsx)(b,{product:e},e.id)}))})})),f=a(1134),k=a(8981),g=a(5088),S=(0,d.Pi)((function(){var e=(0,f.cI)({mode:"onChange"}),s=e.register,a=e.formState.errors,t=e.handleSubmit,i=e.setValue,c=(0,n.useContext)(x._).basket;return(0,n.useEffect)((function(){c.getSale>0&&i("code","abcAD55")}),[]),(0,j.jsxs)("form",{onSubmit:t((function(){c.getSale>0?(c.setSale=0,i("code","")):c.setSale=10})),className:"setsale",children:[(0,j.jsx)("div",{className:"setsale__input",children:(0,j.jsx)(g.Z,{register:s,type:"text",setValue:i,errors:a,name:"code",textFiled:"Promocode"})}),(0,j.jsx)("div",{className:"setsale__btn",children:(0,j.jsx)(k.zx,{name:"sale",children:(0,j.jsx)("p",{className:"mini",children:0!=(null===c||void 0===c?void 0:c.getSale)?"delete":"apply"})})})]})})),Z=(0,d.Pi)((function(){var e=(0,n.useContext)(x._).basket;return(0,j.jsx)("div",{className:"totalprice",children:0!=e.getSale?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"totalprice__price totalprice__block",children:[(0,j.jsx)("div",{className:"totalprice__text",children:(0,j.jsx)("p",{className:"mini",children:"Price without discount"})}),(0,j.jsx)("div",{className:"totalprice__number",children:(0,j.jsx)("p",{className:"basket",children:"".concat(e.sum,"$")})})]}),(0,j.jsxs)("div",{className:"totalprice__sale totalprice__block",children:[(0,j.jsx)("div",{className:"totalprice__text",children:(0,j.jsx)("p",{className:"mini",children:"Discount"})}),(0,j.jsx)("div",{className:"totalprice__number",children:(0,j.jsx)("p",{className:"mini",children:"10%"})})]}),(0,j.jsxs)("div",{className:"totalprice__total totalprice__block",children:[(0,j.jsx)("div",{className:"totalprice__text",children:(0,j.jsx)("p",{className:"mini",children:"Total "})}),(0,j.jsx)("div",{className:"totalprice__number",children:(0,j.jsx)("p",{className:" sale",children:"".concat(e.sumSale,"$")})})]})]}):(0,j.jsxs)("div",{className:"totalprice__total notprice totalprice__block",children:[(0,j.jsx)("div",{className:"totalprice__text",children:(0,j.jsx)("p",{className:"mini",children:"Price without discount "})}),(0,j.jsx)("div",{className:"totalprice__number",children:(0,j.jsx)("p",{children:"".concat(e.sum,"$")})})]})})})),y=(0,d.Pi)((function(){var e=(0,n.useContext)(x._).basket,s=(0,o.s0)();(0,n.useEffect)((function(){document.title="Basket"}),[]);var a=function(){var a=(0,i.Z)((0,t.Z)().mark((function a(){return(0,t.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,v.ZH)();case 2:e.clear(),s("/shop");case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return(0,j.jsx)("div",{className:"basket  indent_last",children:(0,j.jsx)("div",{className:"container",children:(0,j.jsxs)("div",{className:"basket__row",children:[(0,j.jsxs)("div",{className:"pageonebas__header",children:[(0,j.jsxs)("div",{className:"pageonebas__logo",children:[(0,j.jsx)("div",{className:"pageonebas__img",children:(0,j.jsx)(c.r,{})}),(0,j.jsx)("div",{className:"pageonebas__title",children:(0,j.jsx)("h3",{children:"Basket"})})]}),(0,j.jsx)("div",{className:"pageonebas__clear",children:(0,j.jsx)("p",{onClick:a,className:"mini",children:"Clear for basket"})})]}),(0,j.jsxs)("div",{className:"pageonebas",children:[(0,j.jsx)(N,{}),(0,j.jsx)("div",{className:"basket__aside scroll","data-sale":!0,children:(0,j.jsxs)("div",{className:"basket__price",children:[(0,j.jsx)(S,{}),(0,j.jsx)(Z,{}),(0,j.jsx)("div",{className:"pageonebas__btn",children:(0,j.jsx)(k.zx,{name:"sign",children:(0,j.jsx)("p",{className:"mini",children:"make an order"})})})]})})]})]})})})})),w=y},5088:function(e,s,a){a.d(s,{O:function(){return o},Z:function(){return d}});var t=a(1413),i=a(2791),n=a(2698),c=a(9424),l=a(8852),r=(a(8531),a(184));function d(e){var s,a=e.type,d=e.register,o=e.name,u=e.errors,m=e.setValue,p=e.textFiled,v=(u[o]&&(null===(s=u[o])||void 0===s||s.message),(0,i.useContext)(n._).basket);return(0,i.useEffect)((function(){(0,c.ST)()}),[]),(0,r.jsx)("div",{className:"inputFiled",children:(0,r.jsxs)("div",{className:v.setSale>0?"inputFiled__block sale ":"inputFiled__block old all",children:[(0,r.jsx)("div",{className:"inputFiled__text old all",children:(0,r.jsx)("p",{className:"mini",children:p})}),(0,r.jsx)("input",(0,t.Z)((0,t.Z)({},d(o,{required:"Field must be filled",pattern:(0,l.Q)(a,o)})),{},{onChange:function(e){return function(e){v.getSale>0?m(o,"aaa"):(0,c.m)(e,m,o)}(e)},onFocus:c.T_,onBlur:c.T_,type:a}))]})})}function o(e){var s=e.type,a=e.register,n=e.name,d=e.setValue,o=e.textFiled;return(0,i.useEffect)((function(){(0,c.ST)()}),[]),(0,r.jsx)("div",{className:"inputFiled",children:(0,r.jsxs)("div",{className:"inputFiled__block old all",children:[(0,r.jsx)("div",{className:"inputFiled__text old all",children:(0,r.jsx)("p",{className:"mini",children:o})}),(0,r.jsx)("input",(0,t.Z)((0,t.Z)({},a(n,{required:"Field must be filled",pattern:(0,l.Q)(s,n)})),{},{onChange:function(e){return(0,c.m)(e,d,n)},onFocus:c.T_,onBlur:c.T_,type:s}))]})})}}}]);
//# sourceMappingURL=687.0c9f31b6.chunk.js.map